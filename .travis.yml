dist: trusty

language: php

php:
  - 7.2.10

before_script:
  - cp .env.travis .env
  - composer self-update
  - composer install --no-interaction
  - npm install
  - php artisan key:generate
  - php artisan passport:install
  - php artisan migrate

script:
  - vendor/bin/phpunit

cache:
  directories:
    - $HOME/.composer/cache/files

matrix:
  fast_finish: true

notifications:
  slack: "jsfjSjQuffa34XoilparCgqTUqVprVn+VuwWzPCihUInRU7maDmMKvbazV++qBOt3el0M2VaHK5/lxr/JpL3P/49KfJw3NT8xddEBt6PM3euzc89rAJKrScoPY2WJ9VpP/tBa68HHN2wmZKWEWmbs70VB1eR7O+XYk1ziyx0ybnvG+21Sldp43CaGNvjzalXP584jNzOh9FOLthBaKe7pavvxkMt1Yx90LAbqwqyDfinuyt9i3G+wxGV3N4kLNDu5UBak+J4T+/w0y1ahG7ANhz8HfeCNI1DFihK4AU7YZjv52FLJCFJmQzDVbNfBbNwvRBqg0Egj4+K/kRWt4aSU6be27B0SRELYqGzO2HQlsfOel0ZZnOANCkC2/cuGO67pZECVj7PRUpOAPFHpqGbNNHfIQmxm9ysyHzzRzn3VkJxo6bqR+SkqHBalhezOIbbMgaxXdtGjMvSyQWcFHHtA4BBgfOygL0OePqzl3endewRZgdyphTt5+GIjHNdIHEeOfRxV4iRK88zLBfHfJNyEC8SBee9HfGTW3yQK82pAp9cSyVB0GcDK7JpeG3HUr7TgJmu9OAGffTELQjdMmudncYkh65xtgEQ3rFoVPVPUf4K1ByMSY2V7+QPgsE7TFbm3vuon3mMrM4/yIImwPcaqsaX0lZ7BImU4YDkb4K/2LQ="
  on_failure: always
  on_success: change